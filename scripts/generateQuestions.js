/**
 * Script to generate sample PDD questions for testing
 * In production, this would be replaced with actual PDD question data
 */

const fs = require('fs');
const path = require('path');

// Sample question templates
const questionTemplates = [
  {
    text: 'В каком случае водитель транспортного средства имеет преимущество перед пешеходами?',
    options: ['При движении по тротуару', 'При повороте направо на зелёный сигнал светофора', 'При включении специального звукового сигнала', 'Водитель не имеет преимущества'],
    correctAnswerIndex: 2
  },
  {
    text: 'Что означает мигание жёлтого сигнала светофора?',
    options: ['Запрещает движение', 'Разрешает движение', 'Предупреждает о смене сигнала', 'Разрешает движение и предупреждает о нерегулируемом перекрёстке'],
    correctAnswerIndex: 3
  },
  {
    text: 'Какой знак запрещает остановку транспортного средства?',
    options: ['Знак 3.27 "Остановка запрещена"', 'Знак 3.28 "Стоянка запрещена"', 'Знак 3.29 "Стоянка запрещена по нечётным числам"', 'Знак 3.30 "Стоянка запрещена по чётным числам"'],
    correctAnswerIndex: 0
  },
  {
    text: 'Разрешается ли буксировка транспортных средств на автомагистрали?',
    options: ['Разрешается только до ближайшего съезда', 'Запрещается', 'Разрешается без ограничений', 'Разрешается только в светлое время суток'],
    correctAnswerIndex: 0
  },
  {
    text: 'С какой максимальной скоростью разрешается движение в населённых пунктах?',
    options: ['40 км/ч', '50 км/ч', '60 км/ч', '70 км/ч'],
    correctAnswerIndex: 2
  },
  {
    text: 'Что должен сделать водитель при приближении к пешеходному переходу?',
    options: ['Увеличить скорость', 'Снизить скорость и уступить дорогу пешеходам', 'Продолжить движение с прежней скоростью', 'Подать звуковой сигнал'],
    correctAnswerIndex: 1
  },
  {
    text: 'Разрешается ли обгон на пешеходном переходе?',
    options: ['Разрешается', 'Запрещается', 'Разрешается при отсутствии пешеходов', 'Разрешается в населённых пунктах'],
    correctAnswerIndex: 1
  },
  {
    text: 'Какое расстояние должно быть до места остановки при подаче сигнала поворота?',
    options: ['Не менее 50 м', 'Не менее 100 м', 'За 30-50 м до манёвра', 'Заблаговременно'],
    correctAnswerIndex: 3
  },
  {
    text: 'В каких случаях водитель обязан уступить дорогу пешеходам?',
    options: ['На нерегулируемом пешеходном переходе', 'При выезде с прилегающей территории', 'При повороте на перекрёстке', 'Во всех перечисленных случаях'],
    correctAnswerIndex: 3
  },
  {
    text: 'Что означает красный мигающий сигнал светофора на железнодорожном переезде?',
    options: ['Разрешает движение', 'Запрещает движение', 'Предупреждает о приближении поезда', 'Светофор неисправен'],
    correctAnswerIndex: 1
  },
  {
    text: 'Разрешается ли движение задним ходом на перекрёстке?',
    options: ['Разрешается', 'Запрещается', 'Разрешается при отсутствии помех', 'Разрешается на нерегулируемом перекрёстке'],
    correctAnswerIndex: 1
  },
  {
    text: 'Какая максимальная скорость разрешена вне населённых пунктов?',
    options: ['80 км/ч', '90 км/ч', '100 км/ч', '110 км/ч'],
    correctAnswerIndex: 1
  },
  {
    text: 'В каком случае разрешён разворот на автомагистрали?',
    options: ['На ближайшем перекрёстке', 'Через технологические разрывы', 'Разворот запрещён', 'При отсутствии транспортных средств'],
    correctAnswerIndex: 1
  },
  {
    text: 'Какой знак предупреждает о скользкой дороге?',
    options: ['Знак 1.15 "Скользкая дорога"', 'Знак 1.16 "Неровная дорога"', 'Знак 1.17 "Искусственная неровность"', 'Знак 1.18 "Выброс гравия"'],
    correctAnswerIndex: 0
  },
  {
    text: 'Что запрещено водителю на пешеходном переходе?',
    options: ['Снижать скорость', 'Останавливаться', 'Обгонять', 'Уступать дорогу пешеходам'],
    correctAnswerIndex: 2
  },
  {
    text: 'С какого возраста разрешается управлять легковым автомобилем?',
    options: ['С 16 лет', 'С 17 лет', 'С 18 лет', 'С 21 года'],
    correctAnswerIndex: 2
  },
  {
    text: 'Какие транспортные средства могут двигаться по автомагистрали?',
    options: ['Все транспортные средства', 'ТС способные развивать скорость более 40 км/ч', 'Только легковые автомобили', 'ТС способные развивать скорость более 60 км/ч'],
    correctAnswerIndex: 1
  },
  {
    text: 'При каком сигнале регулировщика запрещено движение?',
    options: ['Рука вытянута вперёд', 'Руки опущены или вытянуты в стороны', 'Рука поднята вверх', 'При любом сигнале движение разрешено'],
    correctAnswerIndex: 2
  },
  {
    text: 'Разрешается ли учебная езда на автомагистрали?',
    options: ['Разрешается', 'Запрещается', 'Разрешается в дневное время', 'Разрешается с опытным инструктором'],
    correctAnswerIndex: 1
  },
  {
    text: 'Что означает знак "Главная дорога"?',
    options: ['Дорога с односторонним движением', 'Дорога с преимуществом проезда перекрёстков', 'Дорога для автомобилей', 'Скоростная дорога'],
    correctAnswerIndex: 1
  }
];

// Additional question variations
const additionalQuestions = [
  {
    text: 'Какова минимальная глубина протектора для легковых автомобилей?',
    options: ['1.0 мм', '1.6 мм', '2.0 мм', '2.5 мм'],
    correctAnswerIndex: 1
  },
  {
    text: 'В каких случаях применяется аварийная сигнализация?',
    options: ['При остановке по требованию инспектора', 'При вынужденной остановке', 'При движении задним ходом', 'Во всех перечисленных случаях'],
    correctAnswerIndex: 1
  },
  {
    text: 'Кто имеет преимущество при одновременном развороте?',
    options: ['Водитель, находящийся справа', 'Водитель, находящийся слева', 'Оба должны уступить друг другу', 'Тот, кто первый начал манёвр'],
    correctAnswerIndex: 0
  },
  {
    text: 'Разрешается ли перевозка детей на переднем сиденье?',
    options: ['Разрешается с 7 лет', 'Разрешается с 12 лет', 'Разрешается в детском кресле', 'Запрещается'],
    correctAnswerIndex: 2
  },
  {
    text: 'Какое расстояние должно быть между транспортными средствами при буксировке?',
    options: ['2-4 м', '4-6 м', '6-8 м', '8-10 м'],
    correctAnswerIndex: 1
  },
  {
    text: 'В каких случаях запрещена остановка?',
    options: ['На мостах', 'В тоннелях', 'На эстакадах', 'Во всех перечисленных случаях'],
    correctAnswerIndex: 3
  },
  {
    text: 'Что означает прерывистая линия разметки?',
    options: ['Запрещает пересечение', 'Разрешает пересечение', 'Обозначает край проезжей части', 'Обозначает полосу для маршрутных ТС'],
    correctAnswerIndex: 1
  },
  {
    text: 'Какой штраф за превышение скорости на 20-40 км/ч?',
    options: ['Предупреждение', '500 рублей', '1000-1500 рублей', '2000-2500 рублей'],
    correctAnswerIndex: 1
  },
  {
    text: 'При каком алкогольном опьянении запрещено управление ТС?',
    options: ['0.16 промилле', '0.3 промилле', '0.5 промилле', 'Любое содержание алкоголя'],
    correctAnswerIndex: 0
  },
  {
    text: 'Какой знак обозначает начало населённого пункта?',
    options: ['Знак 5.23', 'Знак 5.25', 'Знак 5.26', 'Знаки 5.23 и 5.25'],
    correctAnswerIndex: 3
  }
];

// Combine all questions
const allQuestions = [...questionTemplates, ...additionalQuestions];

function generateQuestions() {
  const questions = [];
  const totalTickets = 40;
  const questionsPerTicket = 20;

  for (let ticket = 1; ticket <= totalTickets; ticket++) {
    for (let qNum = 1; qNum <= questionsPerTicket; qNum++) {
      // Cycle through templates with some variation
      const templateIndex = ((ticket - 1) * questionsPerTicket + qNum - 1) % allQuestions.length;
      const template = allQuestions[templateIndex];
      
      // Add some variation to the question text for different tickets
      const questionId = `${ticket}_${qNum}`;
      
      questions.push({
        questionId,
        ticketNumber: ticket,
        questionNumber: qNum,
        text: template.text,
        options: template.options,
        correctAnswerIndex: template.correctAnswerIndex,
        imageUrl: `images/${questionId}.jpg`
      });
    }
  }

  return questions;
}

// Generate and save
const questions = generateQuestions();

const outputPath = path.join(__dirname, '..', 'pdd_questions.json');
fs.writeFileSync(outputPath, JSON.stringify(questions, null, 2), 'utf8');

console.log(`Generated ${questions.length} questions for ${40} tickets`);
console.log(`Saved to: ${outputPath}`);
